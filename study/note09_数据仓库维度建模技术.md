
# 维度建模过程 
1 选取业务过程    

针对项目的活动
 
eg： 百度的业务是搜索， 淘宝的业务是买卖东西， 还有电发电量还款

2 定义粒度  

字段的内容和含义 ，选择业务过程中最为原子性的粒度  

eg： 订单表 orders ， 更细粒度 priors 表示每一个订单具体的商品信息  
  
3 确定维度  

对度量 和上下文环境的描述  

eg： 用户注册的基本信息 手机号 姓名 ；商品的基本属性 价格 大小 生产日期

4 确定事实   

通过业务过程分析什么

eg ： 促销活动需要度量的是销售量和销售金额  


> 感觉就像是建立数据库 表的过程


# 维度表设计 
主要问题 

- 维度变化  

- 维度层次  

- 维度一致性  

- 维度整合和拆分  

- 维度其他  



# 维度变化  

缓慢维度变化   


确定数据变化在维度表中如何表示  

- 商品的描述信息变化  

- 商品的所属类发生变化  



## 缓慢变化维度几重处理方式  

重写维度值

插入新的维度行

插入新的维度列

> 维度的行对应数据 维度的列对应的是字段， 就像数据表的行列


## 维度层次

值维度表中属性之间存在的从属关系  

eg ： 商品类别 电子产品：手机 ，笔记本，  母婴产品

商品的类目

方法一：扁平化，冗余在一个表中 
方法二：雪花架构

```  
商品维度表 

星形架构                   雪花架构
                          t1         t2       t3
product_id                p_id       l2       l1
level1_cate_id            l3         l3       l2
level2_cate_id            des
level3_cate_id
des

```
> 类似 目录表 中可以设置 parentid


### 钻取
向下 ： 从汇总的数据深入 到细节数据   有年度的话，拆分成季度的
向上 ： 从细节到总体                有月度的话，合并成季度

## 维度一致性 

两个维度如果有关系，要么完全一样， 要么数据逻辑上是另一个子集   

多次迭代过程中猪肚建立起来的  

> 类似我们新加个业务需求， 新添加的表  

## 维度整合拆分  

维度来自多个业务系统 需要整合  

> 看两个业务的耦合程度 决定是拆分表 还是整合表


# 事实表
 维度建模的核心和基本表 ，实时表存储了业务过程中各种度量和事实   而这些度量和事实是下游数据使用人员关心和分析的对象 
 
 事实表的三种主要类型  
  事务事实表   ： 事务的一条记录 ，业务过程， 原子粒度 ， 单次业务的细节  （发生了才记录）
  超市零售业务：
  1 业务过程   
  2 粒度  
  3 维度  
  4 事实  
  
  快照事实表   ： 业务的状态 ，  库存 促销 ，（定时记录）
  
  累计快照事实表   ： 有工作流或者流水线的   : 目标 分析步骤的耗时  
  
  > 类似档案的审核流程
  
  
  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 



   