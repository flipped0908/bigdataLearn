# 数据平台讲解 

1 数据相关的工具 产品 技术  
    批量数据采集   aqoop  spark  从数据库拉去
    离线数据处理   hadoop hive spark   
    实时数据处理   spark streaming flink   
    
2 数据资产  
    业务本身产生的数据沉淀   用户操作行为  
    公司运作产生的数据  
    第三方数据 ： 外界购买  爬虫   交换   
    
3 数据管理  
    管理才能让数据价值最大 风险最小  
    数据仓库 ，数据建模 ， 数据质量 ， 数据规范  数据安全 元数据管理   
    


## 离线平台 
数据化运维  

指标  决策  数据   

销售趋势 商品热销   ，获取能统计对应指标的数据    
昨天一天对应指标的数据   

 A\B test
 A 之前已经上线的 线上拍的算法  
 B 准备上线的算法   
 
 B 没有上线的haul A的流量是100%   
 B 要上线，需要划分流量策略和比例   
 
 先5%流量上线B    对比几天 【不能对比一天， 偶然性很大 】     
 

## 离线数据平台架构

用户点击的一条日志信息  
user  search-query info-id click-timestamp  ip  brand-id browser-type  
统计需求 pv uv   
这个日志是不是需要数据提取，清晰 还是结构化数据

阿里妈妈 站内 直通车 搜索  和 站外 联盟广告 
        
聚类 （没有标签的）       
 
```       
        
埋点日志  数据文件  外部购买 手工文件  爬虫    
--->
批量数据同步工具          
--->
离线数据存储处理 数据管理   
hadoop  hive MR spark 调度管理  
  
离线数据仓库 ods层 明细层 汇总层  集市层  
--->
报表展示 每天都有   
数据分析 临时的   
即时分析 实时  
数据 机器 深度   

```
大数据出现之前  hadoop出现之前  数据仓库 

数据量  
数据建模 维度表 事实表  

## 数据分层
ODS 原始数据层
DWD 明细数据层
DWS 汇总层
ADS 集市数据层  


## 数据仓库技术

OLTP： online transaction processing
  关系型数据库  单条记录快速处理  索引  分库分表
 
OLAP:
  专门的分析数据    
  单条数据没有意义  一般是聚合统计    
  一般是数据查询请求      
  列存储 列压缩 位图索引 等技术可以大大
   
需求上的不同：

资源和性能上不同：

## 分析型数据库

**OLAP  的优势**
列式存储的类型是固定的，很容易采用高压缩比的算法进行压缩和解压缩，
磁盘I/O会大大减少，列式存储只需要读取对应的列，不需要兑取整个表的
多有字段进行处理

## 数据仓库
Hadoop 容易扩展 成本低

## 数据仓库建模技术
传统数据库  
商业  
hadoop  

## 两种数据仓库架构

数据仓库之父   Bill Inmon 
 
商业智能之父  Ralph Kimball


## kimball  
  
维度建模 ：   
度量 ：事实  
上下文 ： 围绕事实的大量文本形式存在的上下文，这些上下文被直观的分割成多个逻辑快 维度建模称作维  
        when where what who why    
星形架构：         
非常直观和符合业务人员的视觉，被大量使用   

总线体系架构：
主题主题之间用一致性维度和企业总线体系架构保证数据仓库的一致性   


## Inmon

企业信息化工厂  企业级数据仓库   
周期长 不适合迅速响应 业务需求  


## 数据仓库逻辑架构设计  
隔离性  
性能和可维护  
规范性  


# 实时数据平台架构 

和离线的对比  
需要马上看到业务效果  

sparkstreaming  flink

## 实时数据存储  
对于在线服务 即数据使用放传入某业务id 然后获取所有此ID的相关字段  放在 HBase 中    

对于实时数据大屏  放在mysql 中 或者 redis 中   




#

#

# 数据管理  

## 数据探查  

对数据本身和关联性分析
数据是否有 是否规范 明确 质量

常用的技术  
主外键  
字段类型 长度  
null 值 比例   
枚举分布  
最大 最小 平均  


## 数据集成 
ETL    抽取 extract 转换 transform 加载 load  

清晰 转换 关联   

按照预先设计的数据模型 将数据加载到 数据仓库的过程   


## 数据质量  
是每个数据相关人员的核心诉求   

数据准确的衡量   ：  
1 完整性   
2 一致性  
3 准确性  
4 即时性   

对数据质量问题需要借助系统和工具才能落地   

- 数据行数波动  
- 主见重复  
- 字段空值比  
- 枚举值检查 比例  
- 字段最小 最大 均值 合计  

通过指标和业务规则检测来衡量数据是否有质量问题   


## 数据屏蔽  

替换  洗牌  删除、加扰  加密   


 
        
        



































 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 








 